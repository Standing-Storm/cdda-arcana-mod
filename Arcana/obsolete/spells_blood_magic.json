[
  {
    "id": "arcana_mark_summon_dark_wyrm",
    "type": "SPELL",
    "name": { "str": "Calling the Worms of the Earth" },
    "description": "Using this spell will summon a dark wyrm.  Whether it will obey you is <color_yellow>completely up to chance.</color>\n\nIf you cast this spell after a sacrifice, the summon will be <color_green>completely loyal</color>.",
    "message": "Your gesture causes the ground to shift and flow, a pitch-black form slithering out of the earth itself.  %s!",
    "valid_targets": [ "ground" ],
    "flags": [ "SOMATIC", "NO_HANDS", "HOSTILE_50" ],
    "effect": "summon",
    "shape": "blast",
    "effect_str": "mon_dark_wyrm_summoned",
    "extra_effects": [ { "id": "arcana_mark_summon_dark_wyrm_sacrifice_check", "hit_self": true } ],
    "difficulty": 50,
    "skill": "magic",
    "max_level": 5,
    "min_damage": 1,
    "max_damage": 1,
    "min_range": 4,
    "max_range": 7,
    "range_increment": 0.6,
    "base_casting_time": 180,
    "final_casting_time": 90,
    "casting_time_increment": -18,
    "base_energy_cost": 24,
    "final_energy_cost": 12,
    "energy_increment": -2.4,
    "min_duration": 600000,
    "max_duration": 1500000,
    "duration_increment": 180000,
    "spell_class": "ARCANA_BLOOD_MAGIC",
    "magic_type": "arcana_blood_magic"
  },
  {
    "id": "arcana_mark_summon_dark_wyrm_sacrifice_check",
    "type": "SPELL",
    "name": { "str": "Calling the Worms of the Earth Sacrifice Check" },
    "description": "Check to see if you're able to auto-control the dark wyrm.",
    "message": "",
    "valid_targets": [ "self" ],
    "flags": [ "SILENT", "NO_HANDS" ],
    "effect": "effect_on_condition",
    "shape": "blast",
    "effect_str": "EOC_ARCANA_SUMMON_DARK_WYRM_SACRIFICE_CHECK",
    "difficulty": 50,
    "skill": "magic",
    "spell_class": "ARCANA_BLOOD_MAGIC",
    "magic_type": "arcana_blood_magic"
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_ARCANA_SUMMON_DARK_WYRM_SACRIFICE_CHECK",
    "condition": { "or": [ { "u_has_any_effect": [ "effect_arcana_blood_magic_killed_human", "effect_arcana_blood_magic_killed" ] } ] },
    "effect": { "u_cast_spell": { "id": "arcana_mark_summon_dark_wyrm_control", "hit_self": true } }
  },
  {
    "id": "arcana_mark_summon_dark_wyrm_control",
    "type": "SPELL",
    "name": { "str": "Calling the Worms of the Earth Charm Spell" },
    "description": "Charms summoned dark wyrms to make them loyal",
    "message": "",
    "valid_targets": [ "hostile" ],
    "flags": [ "SOMATIC", "NO_HANDS", "NO_EXPLOSION_SFX" ],
    "effect": "charm_monster",
    "shape": "blast",
    "min_damage": 1000,
    "max_damage": 1000,
    "skill": "magic",
    "max_level": 5,
    "min_aoe": 8,
    "min_duration": 15000000,
    "max_duration": 15000000,
    "spell_class": "ARCANA_BLOOD_MAGIC",
    "magic_type": "arcana_blood_magic",
    "targeted_monster_ids": [ "mon_dark_wyrm_summoned" ]
  }
]
