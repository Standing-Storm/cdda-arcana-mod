[
  {
    "id": "arcana_react_bane_staff_venom",
    "type": "SPELL",
    "name": { "str": "React: Venom" },
    "description": "Inflicts a bit of biological damage and poison.",
    "message": "Sickening venom flows from your staff as you strike.",
    "flags": [ "NO_EXPLOSION_SFX", "RANDOM_DURATION" ],
    "valid_targets": [ "hostile" ],
    "effect_str": "poison",
    "min_range": 1,
    "max_range": 1,
    "effect": "attack",
    "shape": "blast",
    "min_duration": 500,
    "max_duration": 1500
  },
  {
    "id": "arcana_react_dragonblood_knockdown",
    "type": "SPELL",
    "name": { "str": "React: Knockdown" },
    "description": "How about I slap your shit.",
    "message": "",
    "valid_targets": [ "hostile" ],
    "effect": "attack",
    "shape": "blast",
    "effect_str": "downed",
    "flags": [ "NO_EXPLOSION_SFX", "RANDOM_DURATION", "SILENT" ],
    "min_range": 1,
    "max_range": 1,
    "min_duration": 100,
    "max_duration": 200
  },
  {
    "type": "SPELL",
    "id": "arcana_react_evil_mimic",
    "name": { "str": "React: Addicted To The Power" },
    "description": "This adds a random duration of an effect that mimics evil but technically isn't.",
    "flags": [ "NO_EXPLOSION_SFX", "SILENT", "RANDOM_DURATION" ],
    "message": "",
    "valid_targets": [ "self" ],
    "effect": "attack",
    "shape": "blast",
    "effect_str": "arcana_evil_mimic",
    "min_duration": 150000,
    "max_duration": 210000
  },
  {
    "id": "arcana_react_bloodscourge_fire",
    "type": "SPELL",
    "name": { "str": "React: Immolate Effect" },
    "description": "This commits the burnening.",
    "message": "",
    "valid_targets": [ "hostile" ],
    "flags": [ "NO_EXPLOSION_SFX", "SILENT", "RANDOM_DURATION" ],
    "effect": "attack",
    "shape": "blast",
    "effect_str": "onfire",
    "min_range": 1,
    "max_range": 1,
    "min_duration": 200,
    "max_duration": 400
  },
  {
    "type": "SPELL",
    "id": "arcana_react_drain_life",
    "name": { "str": "React: Drain Life Shell" },
    "description": "This exists only to trigger on-self effects from an on-hit action.",
    "valid_targets": [ "hostile" ],
    "message": "",
    "min_range": 3,
    "max_range": 3,
    "effect": "attack",
    "shape": "blast",
    "flags": [ "NO_EXPLOSION_SFX", "SILENT" ],
    "extra_effects": [ { "id": "arcana_react_drain_life_2", "hit_self": true } ]
  },
  {
    "id": "arcana_react_drain_life_2",
    "type": "SPELL",
    "name": { "str": "React: Drain Life Effect" },
    "description": "This creates the effect that heals the caster.",
    "message": "",
    "valid_targets": [ "self" ],
    "effect": "attack",
    "shape": "blast",
    "effect_str": "drain_life_mending",
    "min_damage": -1,
    "max_damage": -3,
    "flags": [ "NO_EXPLOSION_SFX", "RANDOM_DURATION", "RANDOM_DAMAGE", "SILENT" ],
    "min_duration": 500,
    "max_duration": 1000
  },
  {
    "type": "SPELL",
    "id": "arcana_react_drain_life_improved",
    "name": { "str": "React: Improved Drain Life Shell" },
    "description": "This exists only to trigger on-self effects from an on-hit action.",
    "valid_targets": [ "hostile" ],
    "message": "",
    "effect_str": "arcana_lingering_chill",
    "min_range": 1,
    "max_range": 1,
    "min_duration": 1000,
    "max_duration": 2000,
    "effect": "attack",
    "shape": "blast",
    "flags": [ "NO_EXPLOSION_SFX", "SILENT" ],
    "extra_effects": [ { "id": "arcana_react_drain_life_improved_2", "hit_self": true } ]
  },
  {
    "id": "arcana_react_drain_life_improved_2",
    "type": "SPELL",
    "name": { "str": "React: Drain Life Effect" },
    "description": "This creates the effect that heals the caster.",
    "message": "",
    "valid_targets": [ "self" ],
    "effect": "attack",
    "shape": "blast",
    "effect_str": "sword_mending",
    "min_damage": -3,
    "max_damage": -6,
    "flags": [ "NO_EXPLOSION_SFX", "RANDOM_DURATION", "RANDOM_DAMAGE", "SILENT" ],
    "min_duration": 600,
    "max_duration": 1200
  },
  {
    "type": "SPELL",
    "id": "arcana_react_kinetic_amplifier_flashbang",
    "name": { "str": "React: Flashbang" },
    "description": "Blinding flash on some hits.",
    "valid_targets": [ "ally", "hostile", "ground", "self" ],
    "message": "",
    "effect": "flashbang",
    "shape": "blast",
    "flags": [ "NO_EXPLOSION_SFX", "NO_HANDS", "NO_LEGS" ],
    "min_damage": 10,
    "max_damage": 10,
    "min_range": 10,
    "max_range": 10,
    "min_aoe": 3,
    "max_aoe": 3
  },
  {
    "id": "arcana_react_satchel_attention",
    "type": "SPELL",
    "name": { "str": "React: Satchel Attention" },
    "description": "Small amount of nether attention.",
    "message": "You feel like something is watching youâ€¦",
    "valid_targets": [ "self" ],
    "flags": [ "NO_EXPLOSION_SFX", "RANDOM_DURATION" ],
    "effect": "attack",
    "shape": "blast",
    "effect_str": "attention",
    "min_duration": 6000,
    "max_duration": 18000
  },
  {
    "type": "SPELL",
    "id": "arcana_react_satchel_teleport",
    "name": { "str": "React: Satchel Teleport" },
    "description": "Get yote.  Safe, but comes with teleglow.",
    "extra_effects": [ { "id": "arcana_react_satchel_teleglow" } ],
    "message": "You feel yanked in a non-existent direction!",
    "effect": "short_range_teleport",
    "shape": "blast",
    "valid_targets": [ "self" ],
    "min_range": 10,
    "max_range": 20
  },
  {
    "id": "arcana_react_satchel_teleglow",
    "type": "SPELL",
    "name": { "str": "React: Satchel Teleglow" },
    "description": "Small amount of teleglow.",
    "message": "",
    "valid_targets": [ "self" ],
    "flags": [ "NO_EXPLOSION_SFX", "RANDOM_DURATION" ],
    "effect": "attack",
    "shape": "blast",
    "effect_str": "teleglow",
    "min_duration": 12000,
    "max_duration": 24000
  },
  {
    "type": "SPELL",
    "id": "arcana_react_sanguine_staff_drain",
    "name": { "str": "React: Life's Bane Shell" },
    "description": "This exists only to trigger on-self effects from an on-hit action.",
    "valid_targets": [ "hostile" ],
    "message": "",
    "effect_str": "arcana_lingering_chill",
    "min_range": 1,
    "max_range": 1,
    "min_duration": 100,
    "max_duration": 300,
    "effect": "attack",
    "shape": "blast",
    "flags": [ "NO_EXPLOSION_SFX", "SILENT" ],
    "extra_effects": [ { "id": "arcana_react_sanguine_staff_drain_2", "hit_self": true } ]
  },
  {
    "id": "arcana_react_sanguine_staff_drain_2",
    "type": "SPELL",
    "name": { "str": "React: Life's Bane Effect" },
    "description": "This creates the effect that buffs the caster.",
    "message": "",
    "valid_targets": [ "self" ],
    "effect": "attack",
    "shape": "blast",
    "effect_str": "sanguine_staff_buff",
    "flags": [ "NO_EXPLOSION_SFX", "RANDOM_DURATION", "SILENT" ],
    "min_duration": 6000,
    "max_duration": 18000
  },
  {
    "type": "SPELL",
    "id": "arcana_react_moonstone_touch",
    "name": { "str": "React: Moonstone Touch" },
    "description": "Little bit of madness.",
    "flags": [ "NO_EXPLOSION_SFX", "SILENT", "RANDOM_DURATION" ],
    "message": "",
    "valid_targets": [ "self" ],
    "effect": "attack",
    "shape": "blast",
    "effect_str": "taint",
    "extra_effects": [ { "id": "arcana_react_moonstone_touch_2" } ],
    "min_duration": 15000,
    "max_duration": 45000
  },
  {
    "type": "SPELL",
    "id": "arcana_react_moonstone_touch_2",
    "name": { "str": "React: Moonstone Touch 2" },
    "description": "And some sickness to go with the madness.",
    "flags": [ "NO_EXPLOSION_SFX", "SILENT", "RANDOM_DURATION" ],
    "message": "",
    "valid_targets": [ "self" ],
    "effect": "attack",
    "shape": "blast",
    "effect_str": "arcana_moonstone_touch",
    "min_duration": 200,
    "max_duration": 400
  },
  {
    "id": "arcana_react_shadowy_shield",
    "type": "SPELL",
    "name": { "str": "Shadowy Shield Effect" },
    "description": "This creates the effect that strikes your attackers blind.",
    "message": "Wavering shadows lash out at your attacker!",
    "valid_targets": [ "hostile", "ground" ],
    "effect": "attack",
    "shape": "blast",
    "effect_str": "blind",
    "damage_type": "cold",
    "min_damage": 1,
    "max_damage": 3,
    "flags": [ "NO_EXPLOSION_SFX", "RANDOM_DURATION", "RANDOM_DAMAGE" ],
    "sound_type": "combat",
    "sound_description": "a strange rush of wind!",
    "min_range": 5,
    "max_range": 5,
    "min_duration": 500,
    "max_duration": 1000,
    "field_id": "fd_veil_darkness",
    "field_chance": 1,
    "min_field_intensity": 2,
    "max_field_intensity": 2
  },
  {
    "type": "SPELL",
    "id": "arcana_react_nothing",
    "name": { "str": "React: Nothing" },
    "description": "Dirty hack to add RNG to react effects.",
    "valid_targets": [ "self" ],
    "flags": [ "NO_EXPLOSION_SFX", "SILENT" ],
    "message": "",
    "effect": "attack",
    "shape": "blast"
  },
  {
    "id": "arcana_react_spear_pestilence_poison",
    "type": "SPELL",
    "name": { "str": "React: Paralysis" },
    "description": "The actual poison effect.",
    "message": "The air around your spear wavers with ethereal force.",
    "flags": [ "NO_EXPLOSION_SFX", "RANDOM_DURATION" ],
    "valid_targets": [ "hostile" ],
    "effect_str": "paralyzepoison",
    "min_range": 2,
    "max_range": 2,
    "effect": "attack",
    "shape": "blast",
    "min_duration": 1000,
    "max_duration": 2000
  },
  {
    "id": "arcana_react_symbol_judgment_zap",
    "type": "SPELL",
    "name": { "str": "React: Electric Sting" },
    "description": "Zaps someone in melee.",
    "message": "Sparks jump from your weapon.",
    "flags": [ "NO_EXPLOSION_SFX", "SILENT", "RANDOM_DURATION" ],
    "valid_targets": [ "hostile" ],
    "effect_str": "zapped",
    "min_range": 1,
    "max_range": 1,
    "effect": "attack",
    "shape": "blast",
    "min_duration": 100,
    "max_duration": 500
  },
  {
    "id": "arcana_react_veilblade",
    "type": "SPELL",
    "name": { "str": "React: Restored Ritual Blade" },
    "description": "Devours absence and fatigue, stabilizes portals.",
    "valid_targets": [ "ground" ],
    "effect": "ter_transform",
    "shape": "blast",
    "flags": [ "NO_EXPLOSION_SFX", "SILENT", "IGNORE_WALLS", "NO_PROJECTILE" ],
    "message": "",
    "effect_str": "arcana_veilblade",
    "min_damage": 1,
    "max_damage": 1,
    "min_aoe": 3,
    "max_aoe": 3
  },
  {
    "id": "arcana_react_shrike_misericorde_chill",
    "type": "SPELL",
    "name": { "str": "React: Cold Mercy" },
    "description": "Cold effect on melee.",
    "message": "An unearthly chill radiates from your weapon.",
    "flags": [ "NO_EXPLOSION_SFX", "SILENT", "RANDOM_DURATION" ],
    "valid_targets": [ "hostile" ],
    "effect_str": "arcana_lingering_chill",
    "min_range": 1,
    "max_range": 1,
    "effect": "attack",
    "shape": "blast",
    "min_duration": 500,
    "max_duration": 1000
  },
  {
    "id": "arcana_react_phase_shield",
    "type": "SPELL",
    "name": { "str": "Phase Shield Effect" },
    "description": "This pushes your attackers away.",
    "valid_targets": [ "ally", "hostile" ],
    "flags": [ "SILENT" ],
    "effect": "effect_on_condition",
    "effect_str": "EOC_ARCANA_REACT_PHASE",
    "shape": "blast",
    "min_aoe": 1
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_ARCANA_REACT_PHASE",
    "condition": "has_alpha",
    "effect": [
      { "npc_location_variable": { "context_val": "player_position" } },
      { "math": [ "_push_nearby_enemies_power_level = n_spell_level('magus_push_nearby_enemies_back')" ] },
      { "math": [ "_telekinesis_weight_ratio = 55" ] },
      {
        "math": [
          "_weight_ratio",
          "=",
          "( (_push_nearby_enemies_power_level * _telekinesis_weight_ratio) + (_telekinesis_weight_ratio / 2) ) / (u_weight() / 1000000)"
        ]
      },
      { "math": [ "_telekinesis_shove_spell_level = clamp( ( (_weight_ratio - 1) * 1.5), 0, 20)" ] },
      {
        "if": { "x_in_y_chance": { "x": { "math": [ "_weight_ratio * 1000" ] }, "y": 1000 } },
        "then": [ { "u_add_effect": "downed", "duration": 2 } ]
      },
      {
        "u_knockback": { "math": [ "_telekinesis_shove_spell_level" ] },
        "stun": 2,
        "dam_mult": { "math": [ "1 + (_telekinesis_shove_spell_level * 0.4)" ] },
        "direction_var": { "context_val": "player_position" }
      }
    ]
  },
  {
    "id": "arcana_veilblade_react_mutants",
    "type": "SPELL",
    "name": { "str": "Arcana Veilblade Anti-mutant" },
    "description": "This punishes you if you're a mutant and try to use the veilblade.",
    "valid_targets": [ "self" ],
    "flags": [ "SILENT" ],
    "effect": "effect_on_condition",
    "effect_str": "EOC_ARCANA_VEILBLADE_MUTANT",
    "shape": "blast"
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_ARCANA_VEILBLADE_MUTANT",
    "condition": {
      "or": [
        { "test_eoc": "EOC_CONDITION_XE_ARCANA_VEILBLADE_MUTANT" },
        { "test_eoc": "EOC_CONDITION_MAGICLYSM_ARCANA_VEILBLADE_MUTANT" },
        { "and": [ { "u_has_flag": "MUTATION_THRESHOLD" }, { "not": { "u_has_trait": "THRESH_VEIL" } } ] },
        { "math": [ "u_sum_traits_of_category_char_has('ALPHA') >= 5" ] },
        { "math": [ "u_sum_traits_of_category_char_has('BATRACHIAN') >= 5" ] },
        { "math": [ "u_sum_traits_of_category_char_has('BEAST') >= 5" ] },
        { "math": [ "u_sum_traits_of_category_char_has('BIRD') >= 5" ] },
        { "math": [ "u_sum_traits_of_category_char_has('CATTLE') >= 5" ] },
        { "math": [ "u_sum_traits_of_category_char_has('CEPHALOPOD') >= 5" ] },
        { "math": [ "u_sum_traits_of_category_char_has('CHIMERA') >= 5" ] },
        { "math": [ "u_sum_traits_of_category_char_has('CHIROPTERAN') >= 5" ] },
        { "math": [ "u_sum_traits_of_category_char_has('CRUSTACEAN') >= 5" ] },
        { "math": [ "u_sum_traits_of_category_char_has('DRAGONBLOOD') >= 5" ] },
        { "math": [ "u_sum_traits_of_category_char_has('ELFA') >= 5" ] },
        { "math": [ "u_sum_traits_of_category_char_has('FELINE') >= 5" ] },
        { "math": [ "u_sum_traits_of_category_char_has('FISH') >= 5" ] },
        { "math": [ "u_sum_traits_of_category_char_has('GASTROPOD') >= 5" ] },
        { "math": [ "u_sum_traits_of_category_char_has('INSECT') >= 5" ] },
        { "math": [ "u_sum_traits_of_category_char_has('LIZARD') >= 5" ] },
        { "math": [ "u_sum_traits_of_category_char_has('LUPINE') >= 5" ] },
        { "math": [ "u_sum_traits_of_category_char_has('MARLOSS') >= 1" ] },
        { "math": [ "u_sum_traits_of_category_char_has('MEDICAL') >= 5" ] },
        { "math": [ "u_sum_traits_of_category_char_has('MOUSE') >= 5" ] },
        { "math": [ "u_sum_traits_of_category_char_has('MYCUS') >= 1" ] },
        { "math": [ "u_sum_traits_of_category_char_has('PLANT') >= 5" ] },
        { "math": [ "u_sum_traits_of_category_char_has('RABBIT') >= 1" ] },
        { "math": [ "u_sum_traits_of_category_char_has('RAPTOR') >= 5" ] },
        { "math": [ "u_sum_traits_of_category_char_has('RAT') >= 5" ] },
        { "math": [ "u_sum_traits_of_category_char_has('SLIME') >= 5" ] },
        { "math": [ "u_sum_traits_of_category_char_has('SPIDER') >= 5" ] },
        { "math": [ "u_sum_traits_of_category_char_has('TROGLOBITE') >= 5" ] },
        { "math": [ "u_sum_traits_of_category_char_has('URSINE') >= 5" ] }
      ]
    },
    "effect": [
      { "u_message": "The ritual blade glows briefly and a shock passes through your entire body!", "type": "bad" },
      { "u_cast_spell": { "id": "arcana_veilblade_react_mutants_consequence", "hit_self": true } }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_CONDITION_MAGICLYSM_ARCANA_VEILBLADE_MUTANT",
    "condition": { "math": [ "0 == 1" ] },
    "effect": [  ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_CONDITION_XE_ARCANA_VEILBLADE_MUTANT",
    "condition": { "math": [ "0 == 1" ] },
    "effect": [  ]
  },
  {
    "id": "arcana_veilblade_react_mutants_consequence",
    "type": "SPELL",
    "name": { "str": "Arcana Veilblade Anti-mutant Zap" },
    "description": "This is the actual spell that punishes you if you're a mutant and try to use the veilblade.",
    "valid_targets": [ "self" ],
    "flags": [ "SILENT", "SPLIT_DAMAGE" ],
    "effect": "attack",
    "effect_str": "stunned",
    "shape": "blast",
    "min_damage": 12,
    "max_damage": 30,
    "damage_type": "pure",
    "min_duration": 100,
    "max_duration": 100
  }
]
